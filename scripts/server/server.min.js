// CustomComponentKeeper for Server v1.0.0 by Shainy https://github.com/shainy9969/CustomComponentKeeper
(function(){function n(n){return n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}let t=server.registerSystem.bind(server);server.registerSystem=function(){let i=t(...arguments),r={},e=i.registerComponent.bind(i),o=i.hasComponent.bind(i),u=i.getComponent.bind(i),f=i.applyComponentChanges.bind(i),s=i.destroyComponent.bind(i);return i.registerComponent=function(n){if(e(...arguments))return r[n]=!0},i.hasComponent=function(t,i){let f=o(...arguments);if(f!==!1)return f;if(i in r){let r=u(t,"minecraft:tag");for(let u=0;u<r.data.length;u++){let f=r.data[u].match(new RegExp(`^${n(i)}(.+)`));if(f)try{let n=this.createComponent(t,i);return n.data=JSON.parse(f[1]),this.applyComponentChanges(t,n),!0}catch(e){continue}}return!1}},i.getComponent=function(t,i){let f=u(...arguments);if(f)return f;if(i in r){let r=u(t,"minecraft:tag");for(let u=0;u<r.data.length;u++){let f=r.data[u].match(new RegExp(`^${n(i)}(.+)`));if(f)try{let n=this.createComponent(t,i);return n.data=JSON.parse(f[1]),this.applyComponentChanges(t,n),n}catch(e){continue}}}},i.applyComponentChanges=function(t,i){if(f(...arguments)){if(i.__identifier__ in r){let r=u(t,"minecraft:tag");for(let t=0;t<r.data.length;t++){let u=r.data[t].match(new RegExp(`^${n(i.__identifier__)}(.+)`));if(u)try{JSON.parse(u[1]);r.data.splice(t,1);break}catch(e){continue}}r.data.push(i.__identifier__+JSON.stringify(i.data));f(t,r)}return!0}},i.destroyComponent=function(t,i){if(s(...arguments)&&i in r){let i=u(t,"minecraft:tag");for(let r=0;r<i.data.length;r++){let u=i.data[r].match(new RegExp(`^${n(component.__identifier__)}(.+)`));if(u)try{return JSON.parse(u[1]),i.data.splice(r,1),f(t,i),!0}catch(e){continue}}}},i}})();
